import{S as Rt,i as jt,s as Gt,k as C,l as $,m as I,h as s,b as g,I as st,o as _e,P as me,w as de,q as O,a as w,r as P,c as S,n as V,E as d,V as wt,u as pt,y as Y,z as J,A as W,L as Vt,g as Q,d as Z,B as x,N as be}from"../chunks/index.6ad261be.js";import{S as ge,U as Lt}from"../chunks/UPlotRealtime.c231a3c7.js";import{a as Kt,c as ve,u as ye,b as Ee}from"../chunks/index.e789bfc7.js";import{b as Te,a as we,U as Se}from"../chunks/UPlotTorque.2f26b32f.js";function Ce(t){const e=[];for(var n=0;n<t.length;n++){let a;try{t[n]instanceof Array?a=Kt(t[n][0],t[n][1]):a=Kt(t[n]);let o=ve(a);o.state.throttleInput=1,e.push(o)}catch{}}let l=ge();return l.subscribeTick((a,o)=>{for(let c=0;c<e.length;c++){let i=e[c];i=ye(i,o);let y=i.props.engine.torqueX[i.props.engine.torqueX.length-1];if(i.state.engineRpm>=y){let b=i.props.gearRatio.length-1;i.state.gearInput<b&&(i.state.gearInput+=1)}e[c]=i}}),{carEntities:e,simulation:l}}function $e(t){let e;return{c(){e=C("div")},l(n){e=$(n,"DIV",{}),I(e).forEach(s)},m(n,l){g(n,e,l),t[4](e)},p:st,i:st,o:st,d(n){n&&s(e),t[4](null)}}}function Ie(t,e,n){let{carEntities:l}=e,{simulation:a}=e,{colors:o}=e,c,i;_e(()=>{i=new Te(l,a,o),c.appendChild(i.domElement);const b=c.clientWidth,k=c.clientHeight;console.log(b,k),i.updateSceneOpts({width:b,height:k})}),me(()=>{i&&i.destroy()});function y(b){de[b?"unshift":"push"](()=>{c=b,n(0,c)})}return t.$$set=b=>{"carEntities"in b&&n(1,l=b.carEntities),"simulation"in b&&n(2,a=b.simulation),"colors"in b&&n(3,o=b.colors)},[c,l,a,o,y]}class De extends Rt{constructor(e){super(),jt(this,e,Ie,$e,Gt,{carEntities:1,simulation:2,colors:3})}}function zt(t,e,n){const l=t.slice();return l[3]=e[n],l[5]=n,l}function Xt(t,e,n){const l=t.slice();return l[6]=e[n],l}function Yt(t,e,n){const l=t.slice();return l[6]=e[n],l}function Jt(t){let e,n=t[6].label+"",l;return{c(){e=C("th"),l=O(n),this.h()},l(a){e=$(a,"TH",{class:!0});var o=I(e);l=P(o,n),o.forEach(s),this.h()},h(){V(e,"class","svelte-x3hr8d")},m(a,o){g(a,e,o),d(e,l)},p(a,o){o&2&&n!==(n=a[6].label+"")&&pt(l,n)},d(a){a&&s(e)}}}function Wt(t){let e,n=t[6][t[5]]+"",l;return{c(){e=C("td"),l=O(n),this.h()},l(a){e=$(a,"TD",{class:!0});var o=I(e);l=P(o,n),o.forEach(s),this.h()},h(){V(e,"class","svelte-x3hr8d")},m(a,o){g(a,e,o),d(e,l)},p(a,o){o&4&&n!==(n=a[6][a[5]]+"")&&pt(l,n)},d(a){a&&s(e)}}}function Qt(t){let e,n,l=t[3].label+"",a,o,c,i,y=(t[3].units?t[3].units:"")+"",b,k,D=t[2],m=[];for(let f=0;f<D.length;f+=1)m[f]=Wt(Xt(t,D,f));return{c(){e=C("tr"),n=C("td"),a=O(l),o=w();for(let f=0;f<m.length;f+=1)m[f].c();c=w(),i=C("td"),b=O(y),k=w(),this.h()},l(f){e=$(f,"TR",{class:!0});var v=I(e);n=$(v,"TD",{class:!0});var u=I(n);a=P(u,l),u.forEach(s),o=S(v);for(let E=0;E<m.length;E+=1)m[E].l(v);c=S(v),i=$(v,"TD",{class:!0});var h=I(i);b=P(h,y),h.forEach(s),k=S(v),v.forEach(s),this.h()},h(){V(n,"class","svelte-x3hr8d"),V(i,"class","svelte-x3hr8d"),V(e,"class","svelte-x3hr8d")},m(f,v){g(f,e,v),d(e,n),d(n,a),d(e,o);for(let u=0;u<m.length;u+=1)m[u]&&m[u].m(e,null);d(e,c),d(e,i),d(i,b),d(e,k)},p(f,v){if(v&1&&l!==(l=f[3].label+"")&&pt(a,l),v&4){D=f[2];let u;for(u=0;u<D.length;u+=1){const h=Xt(f,D,u);m[u]?m[u].p(h,v):(m[u]=Wt(h),m[u].c(),m[u].m(e,c))}for(;u<m.length;u+=1)m[u].d(1);m.length=D.length}v&1&&y!==(y=(f[3].units?f[3].units:"")+"")&&pt(b,y)},d(f){f&&s(e),wt(m,f)}}}function Oe(t){let e,n,l,a,o,c,i,y,b,k,D,m=t[1],f=[];for(let h=0;h<m.length;h+=1)f[h]=Jt(Yt(t,m,h));let v=t[0],u=[];for(let h=0;h<v.length;h+=1)u[h]=Qt(zt(t,v,h));return{c(){e=C("table"),n=C("thead"),l=C("tr"),a=C("th"),o=O("-"),c=w();for(let h=0;h<f.length;h+=1)f[h].c();i=w(),y=C("th"),b=O("-"),k=w(),D=C("tbody");for(let h=0;h<u.length;h+=1)u[h].c();this.h()},l(h){e=$(h,"TABLE",{});var E=I(e);n=$(E,"THEAD",{});var p=I(n);l=$(p,"TR",{class:!0});var T=I(l);a=$(T,"TH",{class:!0});var F=I(a);o=P(F,"-"),F.forEach(s),c=S(T);for(let j=0;j<f.length;j+=1)f[j].l(T);i=S(T),y=$(T,"TH",{class:!0});var A=I(y);b=P(A,"-"),A.forEach(s),T.forEach(s),p.forEach(s),k=S(E),D=$(E,"TBODY",{});var G=I(D);for(let j=0;j<u.length;j+=1)u[j].l(G);G.forEach(s),E.forEach(s),this.h()},h(){V(a,"class","svelte-x3hr8d"),V(y,"class","svelte-x3hr8d"),V(l,"class","svelte-x3hr8d")},m(h,E){g(h,e,E),d(e,n),d(n,l),d(l,a),d(a,o),d(l,c);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(l,null);d(l,i),d(l,y),d(y,b),d(e,k),d(e,D);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(D,null)},p(h,[E]){if(E&2){m=h[1];let p;for(p=0;p<m.length;p+=1){const T=Yt(h,m,p);f[p]?f[p].p(T,E):(f[p]=Jt(T),f[p].c(),f[p].m(l,i))}for(;p<f.length;p+=1)f[p].d(1);f.length=m.length}if(E&5){v=h[0];let p;for(p=0;p<v.length;p+=1){const T=zt(h,v,p);u[p]?u[p].p(T,E):(u[p]=Qt(T),u[p].c(),u[p].m(D,null))}for(;p<u.length;p+=1)u[p].d(1);u.length=v.length}},i:st,o:st,d(h){h&&s(e),wt(f,h),wt(u,h)}}}function Pe(t,e,n){let{rows:l}=e,{columns:a}=e,{data:o}=e;return t.$$set=c=>{"rows"in c&&n(0,l=c.rows),"columns"in c&&n(1,a=c.columns),"data"in c&&n(2,o=c.data)},[l,a,o]}class Zt extends Rt{constructor(e){super(),jt(this,e,Pe,Oe,Gt,{rows:0,columns:1,data:2})}}var Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ke="Expected a function",ie="__lodash_hash_undefined__",se=1/0,He="[object Function]",Re="[object GeneratorFunction]",je="[object Symbol]",Ge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ne=/^\w*$/,Fe=/^\./,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ue=/[\\^$.*+?()[\]{}|]/g,qe=/\\(\\)?/g,Me=/^\[object .+?Constructor\]$/,Be=typeof Tt=="object"&&Tt&&Tt.Object===Object&&Tt,Ve=typeof self=="object"&&self&&self.Object===Object&&self,Nt=Be||Ve||Function("return this")();function Le(t,e){return t==null?void 0:t[e]}function Ke(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var ze=Array.prototype,Xe=Function.prototype,oe=Object.prototype,Ht=Nt["__core-js_shared__"],xt=function(){var t=/[^.]+$/.exec(Ht&&Ht.keys&&Ht.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),fe=Xe.toString,Ft=oe.hasOwnProperty,ue=oe.toString,Ye=RegExp("^"+fe.call(Ft).replace(Ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=Nt.Symbol,Je=ze.splice,We=ce(Nt,"Map"),_t=ce(Object,"create"),ee=te?te.prototype:void 0,ne=ee?ee.toString:void 0;function tt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var l=t[e];this.set(l[0],l[1])}}function Qe(){this.__data__=_t?_t(null):{}}function Ze(t){return this.has(t)&&delete this.__data__[t]}function xe(t){var e=this.__data__;if(_t){var n=e[t];return n===ie?void 0:n}return Ft.call(e,t)?e[t]:void 0}function tn(t){var e=this.__data__;return _t?e[t]!==void 0:Ft.call(e,t)}function en(t,e){var n=this.__data__;return n[t]=_t&&e===void 0?ie:e,this}tt.prototype.clear=Qe;tt.prototype.delete=Ze;tt.prototype.get=xe;tt.prototype.has=tn;tt.prototype.set=en;function ot(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var l=t[e];this.set(l[0],l[1])}}function nn(){this.__data__=[]}function rn(t){var e=this.__data__,n=St(e,t);if(n<0)return!1;var l=e.length-1;return n==l?e.pop():Je.call(e,n,1),!0}function ln(t){var e=this.__data__,n=St(e,t);return n<0?void 0:e[n][1]}function an(t){return St(this.__data__,t)>-1}function sn(t,e){var n=this.__data__,l=St(n,t);return l<0?n.push([t,e]):n[l][1]=e,this}ot.prototype.clear=nn;ot.prototype.delete=rn;ot.prototype.get=ln;ot.prototype.has=an;ot.prototype.set=sn;function et(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var l=t[e];this.set(l[0],l[1])}}function on(){this.__data__={hash:new tt,map:new(We||ot),string:new tt}}function fn(t){return Ct(this,t).delete(t)}function un(t){return Ct(this,t).get(t)}function cn(t){return Ct(this,t).has(t)}function hn(t,e){return Ct(this,t).set(t,e),this}et.prototype.clear=on;et.prototype.delete=fn;et.prototype.get=un;et.prototype.has=cn;et.prototype.set=hn;function St(t,e){for(var n=t.length;n--;)if(wn(t[n][0],e))return n;return-1}function pn(t,e){e=bn(e,t)?[e]:dn(e);for(var n=0,l=e.length;t!=null&&n<l;)t=t[En(e[n++])];return n&&n==l?t:void 0}function _n(t){if(!pe(t)||vn(t))return!1;var e=Sn(t)||Ke(t)?Ye:Me;return e.test(Tn(t))}function mn(t){if(typeof t=="string")return t;if(Ut(t))return ne?ne.call(t):"";var e=t+"";return e=="0"&&1/t==-se?"-0":e}function dn(t){return he(t)?t:yn(t)}function Ct(t,e){var n=t.__data__;return gn(e)?n[typeof e=="string"?"string":"hash"]:n.map}function ce(t,e){var n=Le(t,e);return _n(n)?n:void 0}function bn(t,e){if(he(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Ut(t)?!0:Ne.test(t)||!Ge.test(t)||e!=null&&t in Object(e)}function gn(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function vn(t){return!!xt&&xt in t}var yn=At(function(t){t=$n(t);var e=[];return Fe.test(t)&&e.push(""),t.replace(Ae,function(n,l,a,o){e.push(a?o.replace(qe,"$1"):l||n)}),e});function En(t){if(typeof t=="string"||Ut(t))return t;var e=t+"";return e=="0"&&1/t==-se?"-0":e}function Tn(t){if(t!=null){try{return fe.call(t)}catch{}try{return t+""}catch{}}return""}function At(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(ke);var n=function(){var l=arguments,a=e?e.apply(this,l):l[0],o=n.cache;if(o.has(a))return o.get(a);var c=t.apply(this,l);return n.cache=o.set(a,c),c};return n.cache=new(At.Cache||et),n}At.Cache=et;function wn(t,e){return t===e||t!==t&&e!==e}var he=Array.isArray;function Sn(t){var e=pe(t)?ue.call(t):"";return e==He||e==Re}function pe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Cn(t){return!!t&&typeof t=="object"}function Ut(t){return typeof t=="symbol"||Cn(t)&&ue.call(t)==je}function $n(t){return t==null?"":mn(t)}function In(t,e,n){var l=t==null?void 0:pn(t,e);return l===void 0?n:l}var Dn=In;function re(t,e,n){const l=t.slice();return l[16]=e[n],l}function le(t){let e,n=t[16].props.name+"",l,a,o=t[16].props.trim+"",c;return{c(){e=O("Car : "),l=O(n),a=w(),c=O(o)},l(i){e=P(i,"Car : "),l=P(i,n),a=S(i),c=P(i,o)},m(i,y){g(i,e,y),g(i,l,y),g(i,a,y),g(i,c,y)},p:st,d(i){i&&s(e),i&&s(l),i&&s(a),i&&s(c)}}}function On(t){let e,n,l,a,o,c,i,y,b,k,D,m,f,v=(t[0]/1e3).toFixed(1)+"",u,h,E,p,T=Math.floor(ae*3.6)+"",F,A,G,j,ft=Ee(ae,t[2][0].props.weight,t[2][0].props.dragCoef*t[2][0].props.dragArea).toFixed(1)+"",nt,rt,L,mt,K,dt,U,bt,q,gt,M,ut,$t,It,z,vt,B,ct,Dt,Ot,X,ht,Pt,qt;e=new De({props:{carEntities:t[2],simulation:t[3],colors:t[1]}});let lt=t[2],H=[];for(let r=0;r<lt.length;r+=1)H[r]=le(re(t,lt,r));return L=new we({props:{car:t[2][0].props}}),K=new Se({props:{cars:t[2].map(kn)}}),U=new Lt({props:{title:"Speed",key:"speed",transformFn:Pn,time:t[0],colors:t[1],observed:t[2]}}),q=new Lt({props:{title:"Acceleration",units:"m/sÂ²",key:"acceleration",time:t[0],colors:t[1],observed:t[2]}}),z=new Zt({props:{rows:t[4],columns:t[5],data:t[6]}}),X=new Zt({props:{rows:t[7],columns:t[8],data:t[9]}}),{c(){Y(e.$$.fragment),n=w();for(let r=0;r<H.length;r+=1)H[r].c();l=w(),a=C("button"),o=O("Start"),c=w(),i=C("button"),y=O("Stop"),b=w(),k=C("br"),D=w(),m=C("div"),f=O("Time simulation elapsed : "),u=O(v),h=w(),E=C("div"),p=O("Speed : "),F=O(T),A=w(),G=C("div"),j=O("Power needed : "),nt=O(ft),rt=w(),Y(L.$$.fragment),mt=w(),Y(K.$$.fragment),dt=w(),Y(U.$$.fragment),bt=w(),Y(q.$$.fragment),gt=w(),M=C("section"),ut=C("h3"),$t=O("General infos"),It=w(),Y(z.$$.fragment),vt=w(),B=C("section"),ct=C("h3"),Dt=O("Dimensions"),Ot=w(),Y(X.$$.fragment)},l(r){J(e.$$.fragment,r),n=S(r);for(let kt=0;kt<H.length;kt+=1)H[kt].l(r);l=S(r),a=$(r,"BUTTON",{});var _=I(a);o=P(_,"Start"),_.forEach(s),c=S(r),i=$(r,"BUTTON",{});var N=I(i);y=P(N,"Stop"),N.forEach(s),b=S(r),k=$(r,"BR",{}),D=S(r),m=$(r,"DIV",{});var at=I(m);f=P(at,"Time simulation elapsed : "),u=P(at,v),at.forEach(s),h=S(r),E=$(r,"DIV",{});var R=I(E);p=P(R,"Speed : "),F=P(R,T),R.forEach(s),A=S(r),G=$(r,"DIV",{});var it=I(G);j=P(it,"Power needed : "),nt=P(it,ft),it.forEach(s),rt=S(r),J(L.$$.fragment,r),mt=S(r),J(K.$$.fragment,r),dt=S(r),J(U.$$.fragment,r),bt=S(r),J(q.$$.fragment,r),gt=S(r),M=$(r,"SECTION",{});var yt=I(M);ut=$(yt,"H3",{});var Mt=I(ut);$t=P(Mt,"General infos"),Mt.forEach(s),It=S(yt),J(z.$$.fragment,yt),yt.forEach(s),vt=S(r),B=$(r,"SECTION",{});var Et=I(B);ct=$(Et,"H3",{});var Bt=I(ct);Dt=P(Bt,"Dimensions"),Bt.forEach(s),Ot=S(Et),J(X.$$.fragment,Et),Et.forEach(s)},m(r,_){W(e,r,_),g(r,n,_);for(let N=0;N<H.length;N+=1)H[N]&&H[N].m(r,_);g(r,l,_),g(r,a,_),d(a,o),g(r,c,_),g(r,i,_),d(i,y),g(r,b,_),g(r,k,_),g(r,D,_),g(r,m,_),d(m,f),d(m,u),g(r,h,_),g(r,E,_),d(E,p),d(E,F),g(r,A,_),g(r,G,_),d(G,j),d(G,nt),g(r,rt,_),W(L,r,_),g(r,mt,_),W(K,r,_),g(r,dt,_),W(U,r,_),g(r,bt,_),W(q,r,_),g(r,gt,_),g(r,M,_),d(M,ut),d(ut,$t),d(M,It),W(z,M,null),g(r,vt,_),g(r,B,_),d(B,ct),d(ct,Dt),d(B,Ot),W(X,B,null),ht=!0,Pt||(qt=[Vt(a,"click",t[10]),Vt(i,"click",t[11])],Pt=!0)},p(r,[_]){if(_&4){lt=r[2];let R;for(R=0;R<lt.length;R+=1){const it=re(r,lt,R);H[R]?H[R].p(it,_):(H[R]=le(it),H[R].c(),H[R].m(l.parentNode,l))}for(;R<H.length;R+=1)H[R].d(1);H.length=lt.length}(!ht||_&1)&&v!==(v=(r[0]/1e3).toFixed(1)+"")&&pt(u,v);const N={};_&1&&(N.time=r[0]),U.$set(N);const at={};_&1&&(at.time=r[0]),q.$set(at)},i(r){ht||(Q(e.$$.fragment,r),Q(L.$$.fragment,r),Q(K.$$.fragment,r),Q(U.$$.fragment,r),Q(q.$$.fragment,r),Q(z.$$.fragment,r),Q(X.$$.fragment,r),ht=!0)},o(r){Z(e.$$.fragment,r),Z(L.$$.fragment,r),Z(K.$$.fragment,r),Z(U.$$.fragment,r),Z(q.$$.fragment,r),Z(z.$$.fragment,r),Z(X.$$.fragment,r),ht=!1},d(r){x(e,r),r&&s(n),wt(H,r),r&&s(l),r&&s(a),r&&s(c),r&&s(i),r&&s(b),r&&s(k),r&&s(D),r&&s(m),r&&s(h),r&&s(E),r&&s(A),r&&s(G),r&&s(rt),x(L,r),r&&s(mt),x(K,r),r&&s(dt),x(U,r),r&&s(bt),x(q,r),r&&s(gt),r&&s(M),x(z),r&&s(vt),r&&s(B),x(X),Pt=!1,be(qt)}}}let ae=0;function Pn(t){return t*3.6}const kn=t=>t.props;function Hn(t,e,n){let{data:l}=e,{carIds:a=l.carIds}=e;const o=["blue","red","orange","green","purple"];let{carEntities:c,simulation:i,setup3Dsimulation:y}=Ce(a),b=0,k=[{label:"brand"},{label:"name"},{label:"trim"},{label:"year"},{label:"power",units:"hp",key:"engine.hp"},{label:"price"}],[D,m]=h(c,k),f=[{label:"weight",units:"kg"},{label:"length",units:"mm",key:"length"},{label:"width",units:"mm"},{label:"height",units:"mm"},{label:"wheelbase",units:"mm"}],[v,u]=h(c,f);function h(T,F){let A=T.map(j=>({label:j.props.name})),G=T.map(j=>{let ft=[];return F.forEach(nt=>{let rt=nt.key||nt.label;ft.push(Dn(j.props,rt))}),ft});return[A,G]}i.subscribeTick((T,F)=>{n(0,b=T)});function E(){i.start()}function p(){i.stop()}return t.$$set=T=>{"data"in T&&n(12,l=T.data),"carIds"in T&&n(13,a=T.carIds)},[b,o,c,i,k,D,m,f,v,u,E,p,l,a]}class Fn extends Rt{constructor(e){super(),jt(this,e,Hn,On,Gt,{data:12,carIds:13})}}export{Fn as default};

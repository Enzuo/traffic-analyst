import{S as w,c as M}from"./PerformanceObserver.CpkuGQ3y.js";const S='<g><path d="M-18.823 5.233c1.331 3.19 5.112 3.173 5.112 3.173l8.332-.185 14.298.023c2.613.26 3.65.23 3.65.23 2.81-.05 4.114-.504 4.114-.504C21.27 5.282 21.237.112 21.237.112s.027-5.17-4.56-7.857c0 0-1.304-.455-4.115-.504 0 0-1.036-.03-3.65.23l-14.297.022-8.332-.184s-3.781-.017-5.113 3.173c-.591 1.214-.605 5.12-.605 5.12s.02 3.907.612 5.12Z" style="fill:#f5f5f5;fill-opacity:1;stroke:#000;stroke-dasharray:none;stroke-opacity:1;stroke-width:.293322"/><path d="M13.15 4.925c-.657 1.23-1.857 1.781-2.597 1.894-2.975-.501-7.562-1.262-7.562-1.262.641-1.506 1.052-3.643 1.03-5.544.012-1.9-.4-4.038-1.04-5.543 0 0 4.586-.761 7.562-1.263.74.113 1.94.664 2.597 1.894.674 1.49.88 4.935.88 4.935s-.196 3.4-.87 4.89ZM-15.631 5.726c.607.33 1.28.465 1.992.461a7 7 0 0 0 1.053-.095c-1.79-1.315-2.743-2.976-2.693-6.03-.043-3.053.911-4.714 2.7-6.03a7 7 0 0 0-1.052-.095c-.713-.004-1.385.13-1.993.461-1.223 1.283-1.906 2.656-1.91 5.664s.68 4.382 1.903 5.664ZM10.15 7.557C8.966 7.134 1.468 5.783-2.867 5.772c-1.163 0-7.335-.115-7.335-.115.31.385.091.689-.023.802-.465.264-1.058.549-1.058.549 2.092.504 20.18.504 21.435.55ZM10.086-7.408C8.9-6.984 1.403-5.633-2.934-5.622c-1.162 0-7.334.115-7.334.115.31-.385.091-.689-.023-.802-.465-.264-1.058-.55-1.058-.55 2.092-.503 20.18-.503 21.435-.549Z" style="fill:#5ec1c7;fill-opacity:1;stroke:#202e37;stroke-dasharray:none;stroke-opacity:1;stroke-width:.293322"/><path d="M15.033 6.985c3.65-.046 5.138-5.289 5.16-6.846-.06-1.655-.557-6.022-5.09-6.96" style="fill:none;stroke:#151d28;stroke-dasharray:none;stroke-opacity:1;stroke-width:.293322"/><path d="m19.52.391.023-.824.65-.664-.58-2.244.837 2.198.488.676.046 1.018-.488.596-.907 2.152c.486-.887-.186.228.651-2.29Z" style="fill:#151d28;fill-opacity:1;stroke:none;stroke-dasharray:none;stroke-opacity:.47234;stroke-width:.293322"/><path d="m-1.078 7.374-2.023-.091-.558-1.488 1.697.045ZM-.959-7.156h-2.022l-.465 1.488 1.604-.045Z" style="fill:#202e37;fill-opacity:1;stroke:none;stroke-dasharray:none;stroke-opacity:1;stroke-width:.293322"/><path d="M-14.213 7.603s-.274-.394-.675-.824c-.534-.48-2.394-1.35-2.394-1.35.325 1.098 1.279 1.877 3.069 2.174ZM-14.255-7.554s-.274.394-.675.824c-.534.48-2.394 1.35-2.394 1.35.325-1.098 1.278-1.877 3.069-2.174Z" style="fill:#386d9b;fill-opacity:1;stroke:#202e37;stroke-dasharray:none;stroke-opacity:1;stroke-width:.293322"/><path d="M6.757 6.87 5.734 9.528s.465.183.93-.046c.558-.733 1.115-1.603 1.115-1.603.698-.412 1.767-.412 1.767-.412ZM6.803-6.786 5.78-9.442s.465-.183.93.046a28 28 0 0 1 1.116 1.602c.697.412 1.767.412 1.767.412Z" style="fill:#151d28;fill-opacity:1;stroke:none;stroke-dasharray:none;stroke-opacity:1;stroke-width:.293322"/></g>';function x(l,a){const r=[];let c,o=l.offsetWidth,i=l.offsetHeight,n=w().addTo(l).size(o,i).viewbox(0,0,o/6,i/6),s=n.rect(o,i);const d=25;var y=n.pattern(d,i,function(e){e.rect(d,i).stroke({color:"#eee",width:.1}).fill("none")}).move(0,0);s.fill(y);function m(){if(a.forEach(e=>{let t=r.find(b=>b.id===e.id);t||(t=Z(e,n),t.group.click(function(){v(e),t.selectCircle.fill({color:"rgba(255, 255, 0, 0.30)"})}),t.positionY=Math.random(),r.push(t)),t.rearLight&&t.rearLight.css(e.state.brakeInput>0?{fill:"red",stroke:"red"}:{fill:"#386d9b",stroke:"#202e37"});let g=125+Math.floor(125*e.state.brakeInput),h=125+Math.floor(255*e.state.throttleInput);t.carBox.fill({color:"rgb("+g+","+h+",0)"}),e.id!==c&&t.selectCircle.fill({color:"rgba(255, 255, 0, 0.03)"}),t.group.move(e.state.position,5+t.positionY)}),a.length!==r.length){let e=r.findIndex(t=>a.findIndex(h=>h.id===t.id)===-1);r[e].group.remove(),r.splice(e,1)}}function v(e){c=e.id,l.dispatchEvent(new CustomEvent("carClick",{detail:{id:c}}))}let f=M("TrafficSceneSvg"),p;function k(e){p=window.requestAnimationFrame(k),f.measureStart(),m(),f.measureEnd()}k();function C(){window.cancelAnimationFrame(p)}return{destroy:C,debug:{perf:f}}}function Z(l,a){let o=a.group(),i=o.circle(10).stroke("none").fill({color:"red"}).move(-10/2,-10/2),s=o.group().svg(S);s.scale(.14),s.move(-4.1*6,-1.8*5);let d=o.find("path")[5];return{id:l.id,group:o,carBox:s,selectCircle:i,rearLight:d}}export{x as c};

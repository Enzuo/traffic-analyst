import{S as F,i as S,s as _,k as D,l as T,m as x,h as k,b as A,I as y,w as G}from"./index.6ad261be.js";import{u as L}from"./uPlot.min.945a0543.js";function v(){let i=0,t=0,n=[],r=1,f=!1,u;const m=a=>{n.push(a)},c=a=>{u=window.requestAnimationFrame(c);const h=20;let d=1,g=Math.min(a-i,20)*r;g>h&&(d=Math.ceil(g/h));for(var e=0;e<d;e++)s(g/d);i=a},l=()=>{u||(u=window.requestAnimationFrame(c),f=!0)},o=()=>{window.cancelAnimationFrame(u),u=null,f=!1},s=a=>{t+=a;for(var h=0;h<n.length;h++)n[h](t,a)};return{start:l,stop:o,subscribeTick:m,get isPlaying(){return f}}}function P(i,t,n){let r=[[]],f=[],u=i.colors?i.colors:["blue","red","orange","green"];for(let l=0;l<t.length;l++)f.push({label:t[l].props.name,scale:"y",value:(o,s)=>s==null?"-":s.toFixed(1)+(i.units||"km/h"),stroke:u[l]}),r.push([]);const m={title:i.title||"Speed",width:300,height:300,cursor:{drag:{setScale:!1}},select:{show:!1},series:[{},...f],scales:{x:{time:!1},y:{}},axes:[{},{space:60,scale:"y",values:(l,o,s)=>o.map(a=>+a.toFixed(1)),side:1,grid:{show:!1}}]};let c=new L(Object.assign(m,i),r,n);return{setData:l=>{c.setData(l)},updateData:(l,o)=>{r[0].push(l/1e3);for(let s=0;s<o.length;s++){let a=o[s];r[s+1]&&r[s+1].push(a)}c.setData(r)}}}function q(i){let t;return{c(){t=D("div")},l(n){t=T(n,"DIV",{}),x(t).forEach(k)},m(n,r){A(n,t,r),i[8](t)},p:y,i:y,o:y,d(n){n&&k(t),i[8](null)}}}function C(i,t,n){let{title:r}=t,{units:f}=t,{colors:u=null}=t,{key:m}=t,{transformFn:c}=t,{time:l}=t,{observed:o}=t,s,a;const h=e=>{if(s){let w=o.map(b=>c?c(b.state[m]):b.state[m]);s.updateData(e,w)}};function d(e,w){e&&w&&(w.innerHTML="",s=P({title:r,units:f,key:m,transformFn:c,colors:u},e,w))}function g(e){G[e?"unshift":"push"](()=>{a=e,n(0,a)})}return i.$$set=e=>{"title"in e&&n(1,r=e.title),"units"in e&&n(2,f=e.units),"colors"in e&&n(3,u=e.colors),"key"in e&&n(4,m=e.key),"transformFn"in e&&n(5,c=e.transformFn),"time"in e&&n(6,l=e.time),"observed"in e&&n(7,o=e.observed)},i.$$.update=()=>{i.$$.dirty&129&&d(o,a),i.$$.dirty&64&&h(l)},[a,r,f,u,m,c,l,o,g]}class H extends F{constructor(t){super(),S(this,t,C,q,_,{title:1,units:2,colors:3,key:4,transformFn:5,time:6,observed:7})}}export{v as S,H as U};

import{S as b,i as M,s as R,k as S,l as P,m as _,h as x,b as D,I as m,w as T}from"./index.a1ad4ba8.js";import{f as G,h as X,i as v,j as A,b as k,t as I}from"./sceneGraph.8c923948.js";function U(t,r){let e=[[]],a=[];const o=["blue","red","orange","green","purple","grey","grey","grey","grey","grey","grey","grey"];for(let s=0;s<t.gearRatio.length;s++)a.push({label:s+1,scale:"n",value:(l,n)=>n==null?"-":n.toFixed(0),stroke:o[s]}),e.push([]);let p={label:"drag",scale:"n",value:(s,l)=>l==null?"-":l.toFixed(1),stroke:"darkgrey"};e.push([]);const g=2,h=200;let d=0;for(;d<=h;){e[0].push(d);let s=d/3.6;for(let l=0;l<t.gearRatio.length;l++){let n=t.gearRatio[l]*t.driveRatio*(t.gearTransfer?t.gearTransfer[0]:1),u=G(s,n,t.wheelDiameter),w=X(t.engine.torqueCurve,u),c=v(w,n,null,t.wheelDiameter);e[l+1].push(c)}e[e.length-1].push(A(s,t.weight,t.dragArea*t.dragCoef)),d+=g}const y={title:"Gearing",width:800,height:300,cursor:{drag:{setScale:!1}},series:[{},...a,p],scales:{x:{title:"speed",time:!1},y:{}},axes:[{},{space:60,scale:"n",values:(s,l,n)=>l.map(u=>+u.toFixed(0)),side:1,grid:{show:!1}}]};let i=new k(y,e,r);return{setData:s=>{i.setData(s)}}}function j(t){let r;return{c(){r=S("div")},l(e){r=P(e,"DIV",{}),_(r).forEach(x)},m(e,a){D(e,r,a),t[2](r)},p:m,i:m,o:m,d(e){e&&x(r),t[2](null)}}}function H(t,r,e){let{car:a}=r,o;function p(g){T[g?"unshift":"push"](()=>{o=g,e(0,o),e(1,a)})}return t.$$set=g=>{"car"in g&&e(1,a=g.car)},t.$$.update=()=>{t.$$.dirty&3&&o&&(e(0,o.innerHTML="",o),U(a,o))},[o,a,p]}class z extends b{constructor(r){super(),M(this,r,H,j,R,{car:1})}}function L(t,r,e={}){let a=e.colors?e.colors:["blue","red","orange","green"],o=[];for(let i=0;i<t.length;i++){t[i];let s={label:"torque",scale:"nm",value:(n,u)=>u==null?"-":u.toFixed(0),stroke:a[i],dash:[10,5],spanGaps:!0,points:{show:!1}},l={label:"power",scale:"hp",value:(n,u)=>u==null?"-":u.toFixed(0),stroke:a[i],spanGaps:!0,points:{show:!1}};o.push(s),o.push(l)}function p(i,s=100){let l=0,n=i.map(f=>{let q=f.engine.torqueXMultiplier||1;return f.engine.torqueX[f.engine.torqueX.length-1]*q}),u=Math.max(...n),w=[];for(var c=l;c<=u;c+=s)w.push(c);return w}function g(i,s){let l=i.engine;l.torqueXMultiplier;let n=X(l.torqueCurve,s),u=I(n,s);return{torque:n,power:u}}function h(i){let s=p(i),l=[s];for(var n=0;n<i.length;n++){let u=i[n];u.engine.torqueXMultiplier;let c=[],f=[];for(let q=0;q<s.length;q++){let F=s[q],{torque:C,power:E}=g(u,F);c.push(C),f.push(E)}l.push(c),l.push(f)}return l}let d=h(t);const y={title:"Power",width:800,height:300,cursor:{drag:{setScale:!1}},series:[{},...o],scales:{x:{title:"rpm",time:!1},hp:{}},axes:[{},{space:60,scale:"nm",values:(i,s,l)=>s.map(n=>+n.toFixed(0)),side:1,grid:{show:!1}},{space:60,scale:"hp",values:(i,s,l)=>s.map(n=>+n.toFixed(0)),side:1,grid:{show:!1}}]};new k(y,d,r)}function V(t){let r;return{c(){r=S("div")},l(e){r=P(e,"DIV",{}),_(r).forEach(x)},m(e,a){D(e,r,a),t[3](r)},p:m,i:m,o:m,d(e){e&&x(r),t[3](null)}}}function K(t,r,e){let{cars:a}=r,{opts:o={}}=r,p;function g(h){T[h?"unshift":"push"](()=>{p=h,e(0,p),e(1,a),e(2,o)})}return t.$$set=h=>{"cars"in h&&e(1,a=h.cars),"opts"in h&&e(2,o=h.opts)},t.$$.update=()=>{t.$$.dirty&7&&p&&(e(0,p.innerHTML="",p),L(a,p,o))},[p,a,o,g]}class B extends b{constructor(r){super(),M(this,r,K,V,R,{cars:1,opts:2})}}export{B as U,z as a};

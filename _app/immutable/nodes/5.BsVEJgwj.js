import{s as kt,e as E,c as I,b as k,f,i as _,n as ut,z as ue,A as he,l as de,a as T,G as ft,g as S,p as z,h as v,H as Tt,t as H,d as R,j as mt,x as Mt,r as pe}from"../chunks/scheduler.C19aQTI2.js";import{S as jt,i as Ht,c as W,b as X,m as Q,a as Z,t as tt,d as et}from"../chunks/index.B0knyX5n.js";import{e as U}from"../chunks/each.OpygIZJG.js";import{U as Ut}from"../chunks/UPlotRealtime.D_Ew3F7X.js";import{a as me,C as _e,u as ge,f as be}from"../chunks/index.BPu2XYXM.js";import{S as ve,U as ye,a as Ce}from"../chunks/UPlotTorque.CQ6pp_oC.js";import{S as we}from"../chunks/simulation2.CRWH4vD6.js";function Te({url:t}){let e=t.searchParams.getAll("id"),n=t.searchParams.getAll("tid"),r=t.searchParams.getAll("cid");return{carIds:e.map((a,o)=>({id:a,tid:n[o],cid:r[o]}))}}const Mn=Object.freeze(Object.defineProperty({__proto__:null,load:Te},Symbol.toStringTag,{value:"Module"}));function Se(t){const e=[];for(var n=0;n<t.length;n++){let a;try{a=me(t[n].id,t[n].tid,t[n].cid);let o=new _e(a);o.state.throttleInput=1,e.push(o)}catch{}}let r=we();return r.subscribeTick((a,o)=>{for(let u=0;u<e.length;u++){let i=e[u];i=ge(i,o);const y=i.props.engine.torqueCurve.length?i.props.engine.torqueCurve[i.props.engine.torqueCurve.length-1][0]:0;if(i.state.engineRpm>=y){let g=i.props.gearbox.gearRatio.length-1;i.state.gearInput<g&&(i.state.gearInput+=1)}e[u]=i}}),{carEntities:e,simulation:r}}function Ee(t){let e;return{c(){e=E("div")},l(n){e=I(n,"DIV",{}),k(e).forEach(f)},m(n,r){_(n,e,r),t[4](e)},p:ut,i:ut,o:ut,d(n){n&&f(e),t[4](null)}}}function Ie(t,e,n){let{carEntities:r}=e,{simulation:a}=e,{colors:o}=e,u,i;ue(()=>{i=new ve(r,a,o),u.appendChild(i.domElement);const g=u.clientWidth,O=u.clientHeight;i.updateSceneOpts({width:g,height:O})}),he(()=>{i&&i.destroy()});function y(g){de[g?"unshift":"push"](()=>{u=g,n(0,u)})}return t.$$set=g=>{"carEntities"in g&&n(1,r=g.carEntities),"simulation"in g&&n(2,a=g.simulation),"colors"in g&&n(3,o=g.colors)},[u,r,a,o,y]}class $e extends jt{constructor(e){super(),Ht(this,e,Ie,Ee,kt,{carEntities:1,simulation:2,colors:3})}}function zt(t,e,n){const r=t.slice();return r[3]=e[n],r[5]=n,r}function Bt(t,e,n){const r=t.slice();return r[6]=e[n],r}function Vt(t,e,n){const r=t.slice();return r[6]=e[n],r}function Kt(t){let e,n=t[6].label+"",r;return{c(){e=E("th"),r=H(n),this.h()},l(a){e=I(a,"TH",{class:!0});var o=k(e);r=R(o,n),o.forEach(f),this.h()},h(){z(e,"class","svelte-x3hr8d")},m(a,o){_(a,e,o),v(e,r)},p(a,o){o&2&&n!==(n=a[6].label+"")&&mt(r,n)},d(a){a&&f(e)}}}function Lt(t){let e,n=t[6][t[5]]+"",r;return{c(){e=E("td"),r=H(n),this.h()},l(a){e=I(a,"TD",{class:!0});var o=k(e);r=R(o,n),o.forEach(f),this.h()},h(){z(e,"class","svelte-x3hr8d")},m(a,o){_(a,e,o),v(e,r)},p(a,o){o&4&&n!==(n=a[6][a[5]]+"")&&mt(r,n)},d(a){a&&f(e)}}}function Yt(t){let e,n,r=t[3].label+"",a,o,u,i,y=(t[3].units?t[3].units:"")+"",g,O,$=U(t[2]),m=[];for(let s=0;s<$.length;s+=1)m[s]=Lt(Bt(t,$,s));return{c(){e=E("tr"),n=E("td"),a=H(r),o=T();for(let s=0;s<m.length;s+=1)m[s].c();u=T(),i=E("td"),g=H(y),O=T(),this.h()},l(s){e=I(s,"TR",{class:!0});var b=k(e);n=I(b,"TD",{class:!0});var c=k(n);a=R(c,r),c.forEach(f),o=S(b);for(let C=0;C<m.length;C+=1)m[C].l(b);u=S(b),i=I(b,"TD",{class:!0});var h=k(i);g=R(h,y),h.forEach(f),O=S(b),b.forEach(f),this.h()},h(){z(n,"class","svelte-x3hr8d"),z(i,"class","svelte-x3hr8d"),z(e,"class","svelte-x3hr8d")},m(s,b){_(s,e,b),v(e,n),v(n,a),v(e,o);for(let c=0;c<m.length;c+=1)m[c]&&m[c].m(e,null);v(e,u),v(e,i),v(i,g),v(e,O)},p(s,b){if(b&1&&r!==(r=s[3].label+"")&&mt(a,r),b&4){$=U(s[2]);let c;for(c=0;c<$.length;c+=1){const h=Bt(s,$,c);m[c]?m[c].p(h,b):(m[c]=Lt(h),m[c].c(),m[c].m(e,u))}for(;c<m.length;c+=1)m[c].d(1);m.length=$.length}b&1&&y!==(y=(s[3].units?s[3].units:"")+"")&&mt(g,y)},d(s){s&&f(e),Tt(m,s)}}}function Oe(t){let e,n,r,a,o="-",u,i,y,g="-",O,$,m=U(t[1]),s=[];for(let h=0;h<m.length;h+=1)s[h]=Kt(Vt(t,m,h));let b=U(t[0]),c=[];for(let h=0;h<b.length;h+=1)c[h]=Yt(zt(t,b,h));return{c(){e=E("table"),n=E("thead"),r=E("tr"),a=E("th"),a.textContent=o,u=T();for(let h=0;h<s.length;h+=1)s[h].c();i=T(),y=E("th"),y.textContent=g,O=T(),$=E("tbody");for(let h=0;h<c.length;h+=1)c[h].c();this.h()},l(h){e=I(h,"TABLE",{});var C=k(e);n=I(C,"THEAD",{});var d=k(n);r=I(d,"TR",{class:!0});var w=k(r);a=I(w,"TH",{class:!0,"data-svelte-h":!0}),ft(a)!=="svelte-74kvm7"&&(a.textContent=o),u=S(w);for(let j=0;j<s.length;j+=1)s[j].l(w);i=S(w),y=I(w,"TH",{class:!0,"data-svelte-h":!0}),ft(y)!=="svelte-74kvm7"&&(y.textContent=g),w.forEach(f),d.forEach(f),O=S(C),$=I(C,"TBODY",{});var G=k($);for(let j=0;j<c.length;j+=1)c[j].l(G);G.forEach(f),C.forEach(f),this.h()},h(){z(a,"class","svelte-x3hr8d"),z(y,"class","svelte-x3hr8d"),z(r,"class","svelte-x3hr8d")},m(h,C){_(h,e,C),v(e,n),v(n,r),v(r,a),v(r,u);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(r,null);v(r,i),v(r,y),v(e,O),v(e,$);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m($,null)},p(h,[C]){if(C&2){m=U(h[1]);let d;for(d=0;d<m.length;d+=1){const w=Vt(h,m,d);s[d]?s[d].p(w,C):(s[d]=Kt(w),s[d].c(),s[d].m(r,i))}for(;d<s.length;d+=1)s[d].d(1);s.length=m.length}if(C&5){b=U(h[0]);let d;for(d=0;d<b.length;d+=1){const w=zt(h,b,d);c[d]?c[d].p(w,C):(c[d]=Yt(w),c[d].c(),c[d].m($,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=b.length}},i:ut,o:ut,d(h){h&&f(e),Tt(s,h),Tt(c,h)}}}function Pe(t,e,n){let{rows:r}=e,{columns:a}=e,{data:o}=e;return t.$$set=u=>{"rows"in u&&n(0,r=u.rows),"columns"in u&&n(1,a=u.columns),"data"in u&&n(2,o=u.data)},[r,a,o]}class Jt extends jt{constructor(e){super(),Ht(this,e,Pe,Oe,kt,{rows:0,columns:1,data:2})}}var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function De(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ke="Expected a function",re="__lodash_hash_undefined__",le=1/0,je="[object Function]",He="[object GeneratorFunction]",Re="[object Symbol]",Fe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ge=/^\w*$/,xe=/^\./,Ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ae=/[\\^$.*+?()[\]{}|]/g,qe=/\\(\\)?/g,Me=/^\[object .+?Constructor\]$/,Ue=typeof wt=="object"&&wt&&wt.Object===Object&&wt,ze=typeof self=="object"&&self&&self.Object===Object&&self,Rt=Ue||ze||Function("return this")();function Be(t,e){return t==null?void 0:t[e]}function Ve(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var Ke=Array.prototype,Le=Function.prototype,ae=Object.prototype,Dt=Rt["__core-js_shared__"],Wt=function(){var t=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ie=Le.toString,Ft=ae.hasOwnProperty,oe=ae.toString,Ye=RegExp("^"+ie.call(Ft).replace(Ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xt=Rt.Symbol,Je=Ke.splice,We=se(Rt,"Map"),_t=se(Object,"create"),Qt=Xt?Xt.prototype:void 0,Zt=Qt?Qt.toString:void 0;function nt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xe(){this.__data__=_t?_t(null):{}}function Qe(t){return this.has(t)&&delete this.__data__[t]}function Ze(t){var e=this.__data__;if(_t){var n=e[t];return n===re?void 0:n}return Ft.call(e,t)?e[t]:void 0}function tn(t){var e=this.__data__;return _t?e[t]!==void 0:Ft.call(e,t)}function en(t,e){var n=this.__data__;return n[t]=_t&&e===void 0?re:e,this}nt.prototype.clear=Xe;nt.prototype.delete=Qe;nt.prototype.get=Ze;nt.prototype.has=tn;nt.prototype.set=en;function ht(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nn(){this.__data__=[]}function rn(t){var e=this.__data__,n=St(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Je.call(e,n,1),!0}function ln(t){var e=this.__data__,n=St(e,t);return n<0?void 0:e[n][1]}function an(t){return St(this.__data__,t)>-1}function on(t,e){var n=this.__data__,r=St(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}ht.prototype.clear=nn;ht.prototype.delete=rn;ht.prototype.get=ln;ht.prototype.has=an;ht.prototype.set=on;function rt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function sn(){this.__data__={hash:new nt,map:new(We||ht),string:new nt}}function cn(t){return Et(this,t).delete(t)}function fn(t){return Et(this,t).get(t)}function un(t){return Et(this,t).has(t)}function hn(t,e){return Et(this,t).set(t,e),this}rt.prototype.clear=sn;rt.prototype.delete=cn;rt.prototype.get=fn;rt.prototype.has=un;rt.prototype.set=hn;function St(t,e){for(var n=t.length;n--;)if(Tn(t[n][0],e))return n;return-1}function dn(t,e){e=gn(e,t)?[e]:_n(e);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Cn(e[n++])];return n&&n==r?t:void 0}function pn(t){if(!fe(t)||vn(t))return!1;var e=Sn(t)||Ve(t)?Ye:Me;return e.test(wn(t))}function mn(t){if(typeof t=="string")return t;if(xt(t))return Zt?Zt.call(t):"";var e=t+"";return e=="0"&&1/t==-le?"-0":e}function _n(t){return ce(t)?t:yn(t)}function Et(t,e){var n=t.__data__;return bn(e)?n[typeof e=="string"?"string":"hash"]:n.map}function se(t,e){var n=Be(t,e);return pn(n)?n:void 0}function gn(t,e){if(ce(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||xt(t)?!0:Ge.test(t)||!Fe.test(t)||e!=null&&t in Object(e)}function bn(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function vn(t){return!!Wt&&Wt in t}var yn=Gt(function(t){t=In(t);var e=[];return xe.test(t)&&e.push(""),t.replace(Ne,function(n,r,a,o){e.push(a?o.replace(qe,"$1"):r||n)}),e});function Cn(t){if(typeof t=="string"||xt(t))return t;var e=t+"";return e=="0"&&1/t==-le?"-0":e}function wn(t){if(t!=null){try{return ie.call(t)}catch{}try{return t+""}catch{}}return""}function Gt(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(ke);var n=function(){var r=arguments,a=e?e.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var u=t.apply(this,r);return n.cache=o.set(a,u),u};return n.cache=new(Gt.Cache||rt),n}Gt.Cache=rt;function Tn(t,e){return t===e||t!==t&&e!==e}var ce=Array.isArray;function Sn(t){var e=fe(t)?oe.call(t):"";return e==je||e==He}function fe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function En(t){return!!t&&typeof t=="object"}function xt(t){return typeof t=="symbol"||En(t)&&oe.call(t)==Re}function In(t){return t==null?"":mn(t)}function $n(t,e,n){var r=t==null?void 0:dn(t,e);return r===void 0?n:r}var On=$n;const Pn=De(On);function te(t,e,n){const r=t.slice();return r[16]=e[n],r}function ee(t){let e,n=t[16].props.name+"",r,a,o=t[16].props.trim+"",u;return{c(){e=H("Car : "),r=H(n),a=T(),u=H(o)},l(i){e=R(i,"Car : "),r=R(i,n),a=S(i),u=R(i,o)},m(i,y){_(i,e,y),_(i,r,y),_(i,a,y),_(i,u,y)},p:ut,d(i){i&&(f(e),f(r),f(a),f(u))}}}function Dn(t){let e,n,r,a,o="Start",u,i,y="Stop",g,O,$,m,s,b=(t[0]/1e3).toFixed(1)+"",c,h,C,d,w=Math.floor(ne*3.6)+"",G,j,x,B,dt=be(ne,t[2][0].props.weight,t[2][0].props.dragCoef*t[2][0].props.dragArea).toFixed(1)+"",lt,at,V,gt,K,bt,N,vt,A,yt,q,it,Nt="General infos",It,L,Ct,M,ot,At="Dimensions",$t,Y,pt,Ot,qt;e=new $e({props:{carEntities:t[2],simulation:t[3],colors:t[1]}});let st=U(t[2]),P=[];for(let l=0;l<st.length;l+=1)P[l]=ee(te(t,st,l));return V=new ye({props:{car:t[2][0].props}}),K=new Ce({props:{cars:t[2].map(jn)}}),N=new Ut({props:{title:"Speed",key:"speed",transformFn:kn,time:t[0],colors:t[1],observed:t[2]}}),A=new Ut({props:{title:"Acceleration",units:"m/s²",key:"acceleration",time:t[0],colors:t[1],observed:t[2]}}),L=new Jt({props:{rows:t[4],columns:t[5],data:t[6]}}),Y=new Jt({props:{rows:t[7],columns:t[8],data:t[9]}}),{c(){W(e.$$.fragment),n=T();for(let l=0;l<P.length;l+=1)P[l].c();r=T(),a=E("button"),a.textContent=o,u=T(),i=E("button"),i.textContent=y,g=T(),O=E("br"),$=T(),m=E("div"),s=H("Time simulation elapsed : "),c=H(b),h=T(),C=E("div"),d=H("Speed : "),G=H(w),j=T(),x=E("div"),B=H("Power needed : "),lt=H(dt),at=T(),W(V.$$.fragment),gt=T(),W(K.$$.fragment),bt=T(),W(N.$$.fragment),vt=T(),W(A.$$.fragment),yt=T(),q=E("section"),it=E("h3"),it.textContent=Nt,It=T(),W(L.$$.fragment),Ct=T(),M=E("section"),ot=E("h3"),ot.textContent=At,$t=T(),W(Y.$$.fragment)},l(l){X(e.$$.fragment,l),n=S(l);for(let Pt=0;Pt<P.length;Pt+=1)P[Pt].l(l);r=S(l),a=I(l,"BUTTON",{"data-svelte-h":!0}),ft(a)!=="svelte-1ck7hd8"&&(a.textContent=o),u=S(l),i=I(l,"BUTTON",{"data-svelte-h":!0}),ft(i)!=="svelte-kuz4o2"&&(i.textContent=y),g=S(l),O=I(l,"BR",{}),$=S(l),m=I(l,"DIV",{});var p=k(m);s=R(p,"Time simulation elapsed : "),c=R(p,b),p.forEach(f),h=S(l),C=I(l,"DIV",{});var F=k(C);d=R(F,"Speed : "),G=R(F,w),F.forEach(f),j=S(l),x=I(l,"DIV",{});var ct=k(x);B=R(ct,"Power needed : "),lt=R(ct,dt),ct.forEach(f),at=S(l),X(V.$$.fragment,l),gt=S(l),X(K.$$.fragment,l),bt=S(l),X(N.$$.fragment,l),vt=S(l),X(A.$$.fragment,l),yt=S(l),q=I(l,"SECTION",{});var D=k(q);it=I(D,"H3",{"data-svelte-h":!0}),ft(it)!=="svelte-1ci1kq9"&&(it.textContent=Nt),It=S(D),X(L.$$.fragment,D),D.forEach(f),Ct=S(l),M=I(l,"SECTION",{});var J=k(M);ot=I(J,"H3",{"data-svelte-h":!0}),ft(ot)!=="svelte-w45ks1"&&(ot.textContent=At),$t=S(J),X(Y.$$.fragment,J),J.forEach(f)},m(l,p){Q(e,l,p),_(l,n,p);for(let F=0;F<P.length;F+=1)P[F]&&P[F].m(l,p);_(l,r,p),_(l,a,p),_(l,u,p),_(l,i,p),_(l,g,p),_(l,O,p),_(l,$,p),_(l,m,p),v(m,s),v(m,c),_(l,h,p),_(l,C,p),v(C,d),v(C,G),_(l,j,p),_(l,x,p),v(x,B),v(x,lt),_(l,at,p),Q(V,l,p),_(l,gt,p),Q(K,l,p),_(l,bt,p),Q(N,l,p),_(l,vt,p),Q(A,l,p),_(l,yt,p),_(l,q,p),v(q,it),v(q,It),Q(L,q,null),_(l,Ct,p),_(l,M,p),v(M,ot),v(M,$t),Q(Y,M,null),pt=!0,Ot||(qt=[Mt(a,"click",t[10]),Mt(i,"click",t[11])],Ot=!0)},p(l,[p]){if(p&4){st=U(l[2]);let D;for(D=0;D<st.length;D+=1){const J=te(l,st,D);P[D]?P[D].p(J,p):(P[D]=ee(J),P[D].c(),P[D].m(r.parentNode,r))}for(;D<P.length;D+=1)P[D].d(1);P.length=st.length}(!pt||p&1)&&b!==(b=(l[0]/1e3).toFixed(1)+"")&&mt(c,b);const F={};p&1&&(F.time=l[0]),N.$set(F);const ct={};p&1&&(ct.time=l[0]),A.$set(ct)},i(l){pt||(Z(e.$$.fragment,l),Z(V.$$.fragment,l),Z(K.$$.fragment,l),Z(N.$$.fragment,l),Z(A.$$.fragment,l),Z(L.$$.fragment,l),Z(Y.$$.fragment,l),pt=!0)},o(l){tt(e.$$.fragment,l),tt(V.$$.fragment,l),tt(K.$$.fragment,l),tt(N.$$.fragment,l),tt(A.$$.fragment,l),tt(L.$$.fragment,l),tt(Y.$$.fragment,l),pt=!1},d(l){l&&(f(n),f(r),f(a),f(u),f(i),f(g),f(O),f($),f(m),f(h),f(C),f(j),f(x),f(at),f(gt),f(bt),f(vt),f(yt),f(q),f(Ct),f(M)),et(e,l),Tt(P,l),et(V,l),et(K,l),et(N,l),et(A,l),et(L),et(Y),Ot=!1,pe(qt)}}}let ne=0;function kn(t){return t*3.6}const jn=t=>t.props;function Hn(t,e,n){let{data:r}=e,{carIds:a=r.carIds}=e;const o=["blue","red","orange","green","purple"];let{carEntities:u,simulation:i,setup3Dsimulation:y}=Se(a),g=0,O=[{label:"brand"},{label:"name"},{label:"trim"},{label:"year"},{label:"power",units:"hp",key:"engine.hp"},{label:"price"}],[$,m]=h(u,O),s=[{label:"weight",units:"kg"},{label:"length",units:"mm",key:"length"},{label:"width",units:"mm"},{label:"height",units:"mm"},{label:"wheelbase",units:"mm"}],[b,c]=h(u,s);function h(w,G){let j=w.map(B=>({label:B.props.name})),x=w.map(B=>{let dt=[];return G.forEach(lt=>{let at=lt.key||lt.label;dt.push(Pn(B.props,at))}),dt});return[j,x]}i.subscribeTick((w,G)=>{n(0,g=w)});function C(){i.start()}function d(){i.stop()}return t.$$set=w=>{"data"in w&&n(12,r=w.data),"carIds"in w&&n(13,a=w.carIds)},[g,o,u,i,O,$,m,s,b,c,C,d,r,a]}class Un extends jt{constructor(e){super(),Ht(this,e,Hn,Dn,kt,{data:12,carIds:13})}}export{Un as component,Mn as universal};
